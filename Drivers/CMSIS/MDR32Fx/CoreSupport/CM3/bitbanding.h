#ifndef BITBANDING_H
#define BITBANDING_H

#define BYTE_TO_BITBAND31(A)    (A==0x80000000)? 31 : 0
#define BYTE_TO_BITBAND30(A)    (A==0x40000000)? 30 : BYTE_TO_BITBAND31(A)
#define BYTE_TO_BITBAND29(A)    (A==0x20000000)? 29 : BYTE_TO_BITBAND30(A)
#define BYTE_TO_BITBAND28(A)    (A==0x10000000)? 28 : BYTE_TO_BITBAND29(A)
#define BYTE_TO_BITBAND27(A)    (A==0x08000000)? 27 : BYTE_TO_BITBAND28(A)
#define BYTE_TO_BITBAND26(A)    (A==0x04000000)? 26 : BYTE_TO_BITBAND27(A)
#define BYTE_TO_BITBAND25(A)    (A==0x02000000)? 25 : BYTE_TO_BITBAND26(A)
#define BYTE_TO_BITBAND24(A)    (A==0x01000000)? 24 : BYTE_TO_BITBAND25(A)
#define BYTE_TO_BITBAND23(A)    (A==0x00800000)? 23 : BYTE_TO_BITBAND24(A)
#define BYTE_TO_BITBAND22(A)    (A==0x00400000)? 22 : BYTE_TO_BITBAND23(A)
#define BYTE_TO_BITBAND21(A)    (A==0x00200000)? 21 : BYTE_TO_BITBAND22(A)
#define BYTE_TO_BITBAND20(A)    (A==0x00100000)? 20 : BYTE_TO_BITBAND21(A)
#define BYTE_TO_BITBAND19(A)    (A==0x00080000)? 19 : BYTE_TO_BITBAND20(A)
#define BYTE_TO_BITBAND18(A)    (A==0x00040000)? 18 : BYTE_TO_BITBAND19(A)
#define BYTE_TO_BITBAND17(A)    (A==0x00020000)? 17 : BYTE_TO_BITBAND18(A)
#define BYTE_TO_BITBAND16(A)    (A==0x00010000)? 16 : BYTE_TO_BITBAND17(A)
#define BYTE_TO_BITBAND15(A)    (A==0x00008000)? 15 : BYTE_TO_BITBAND16(A)
#define BYTE_TO_BITBAND14(A)    (A==0x00004000)? 14 : BYTE_TO_BITBAND15(A)
#define BYTE_TO_BITBAND13(A)    (A==0x00002000)? 13 : BYTE_TO_BITBAND14(A)
#define BYTE_TO_BITBAND12(A)    (A==0x00001000)? 12 : BYTE_TO_BITBAND13(A)
#define BYTE_TO_BITBAND11(A)    (A==0x00000800)? 11 : BYTE_TO_BITBAND12(A)
#define BYTE_TO_BITBAND10(A)    (A==0x00000400)? 10 : BYTE_TO_BITBAND11(A)
#define BYTE_TO_BITBAND09(A)    (A==0x00000200)? 9  : BYTE_TO_BITBAND10(A)
#define BYTE_TO_BITBAND08(A)    (A==0x00000100)? 8  : BYTE_TO_BITBAND09(A)
#define BYTE_TO_BITBAND07(A)    (A==0x00000080)? 7  : BYTE_TO_BITBAND08(A)
#define BYTE_TO_BITBAND06(A)    (A==0x00000040)? 6  : BYTE_TO_BITBAND07(A)
#define BYTE_TO_BITBAND05(A)    (A==0x00000020)? 5  : BYTE_TO_BITBAND06(A)
#define BYTE_TO_BITBAND04(A)    (A==0x00000010)? 4  : BYTE_TO_BITBAND05(A)
#define BYTE_TO_BITBAND03(A)    (A==0x00000008)? 3  : BYTE_TO_BITBAND04(A)
#define BYTE_TO_BITBAND02(A)    (A==0x00000004)? 2  : BYTE_TO_BITBAND03(A)
#define BYTE_TO_BITBAND01(A)    (A==0x00000002)? 1  : BYTE_TO_BITBAND02(A)
#define BYTE_TO_BITBAND(A)      (A==0x00000001)? 0  : BYTE_TO_BITBAND01(A)


#define SRAM_BASE               (0x20000000)
#define SRAM_BB_BASE            (0x22000000)
#define PERIPH_BASE             (0x40000000)
#define PERIPH_BB_BASE          (0x42000000)



#define BIT_BAND_PER(REG,BIT,VAL)  ((*(__IO uint32_t*)(PERIPH_BB_BASE+((uint32_t)(&(REG))-PERIPH_BASE)*32+4*((uint32_t)(BYTE_TO_BITBAND(BIT)))))=VAL)
#define BIT_BAND_SRAM(RAM,BIT,VAL) ((*(__IO uint32_t*)(SRAM_BB_BASE+((uint32_t)(RAM)-SRAM_BASE)*32+4*((uint32_t)(BIT))))=VAL)

#define TO_BIT_BAND_PER(REG,BIT)  (*(__IO uint32_t*)(PERIPH_BB_BASE+((uint32_t)(&(REG))-PERIPH_BASE)*32+4*((uint32_t)(BYTE_TO_BITBAND(BIT)))))
#define TO_BIT_BAND_SRAM(RAM,BIT) (*(__IO uint32_t*)(SRAM_BB_BASE+((uint32_t)(RAM)-SRAM_BASE)*32+4*((uint32_t)(BIT))))


#endif
